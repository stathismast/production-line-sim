Λειτουργικά Συστήματα 2018-19
Εργασία 1

Μαστοράκης Ευστάθιος-Ανδρέας
1115201500092


Γενική σχεδίαση
    > Η αρχική διεργασία δημιουργεί 8 νέες διεργασίες.
        - 3 διεργασίες που κατασκευάζουν εξαρτήματα
        - 1 διεργασία βαφείο
        - 3 διεργασίες που ελέγχουν τα εξαρτήματα
        - 1 διεργασία που συναρμολογεί τα εξαρτήματα

    > Οι τρείς διεργασίες που κατασκευάζουν τα εξαρτήματα μεταφέρουν το κάθε
      εξάρτημα τους στο βαφείο μέσω ενός κομματιού κοινής μνήμης το οποίο
      προστατεύεται από δύο σημαφόρους. Δηλαδή υπάρχει ένα κομμάτι κοινής
      μνήμης ανάμεσα στους κατασκευαστές και το βαφείο.

    > Ανάμεσα στο βαφείο και τους ελεγκτές, υπάρχουν τρία κομμάτια κοινής
      μνήμης, ένα για κάθε διεργασία ελέγχου. Το κάθε κομμάτι κοινής μνήμης
      προστατεύεται μέσω δύο δικών του σημαφόρων.

    > Ανάμεσα στους ελεγκτές και τη διεργασία συναρμολόγησης υπάρχει ένα
      κομμάτι κοινής μνήμης, ίδιο και για τους τρείς ελεγκτές. Από εκεί
      λαμβάνει ο συναρμολογητής τα ελεχγμένα εξαρτήματα. Όπως και πριν,
      αυτήη κοινή μνήμη έχει δύο σημαφόρους που ελέγχουν την προσπέλαση
      της από τις διεργασίες.


Σχετικό Σχήμα:
+----------+                              +-----------+   +---------+
|Εξάρτημα 1|------+                +----->|Κοινή Μνήμη|-->|Έλεγχος 1|------+
+----------+      |                |      +-----------+   +---------+      |
                  v                |                                       v
+----------+   +-----------+   +------+   +-----------+   +---------+   +-----------+   +-------------+
|Εξάρτημα 2|-->|Κοινή Μνήμη|-->|Βαφείο|-->|Κοινή Μνήμη|-->|Έλεγχος 2|-->|Κοινή Μνήμη|-->|Συναρμολόγηση|
+----------+   +-----------+   +------+   +-----------+   +---------+   +-----------+   +-------------+
                  ^                |                                       ^
+----------+      |                |      +-----------+   +---------+      |
|Εξάρτημα 3|------+                +----->|Κοινή Μνήμη|-->|Έλεγχος 3|------+
+----------+                              +-----------+   +---------+


Δομή Part
    > Η δομή Part είναι το εξάρτημα. Περιέχει τα εξης πεδία:
        - type: τύπος του εξαρτήματος (0 ή 1 ή 2)
        - id: ο τετραψήφιο τυχαίος αναγνωριστικός αριθμός
        - creationTime: χρονική στιγμή δημιουργίας του εξαρτήματος
        - painterTime: χρονική στιγμή κατάληψης του βαφείου


Δομή PSM και TriplePSM
    > H δομή PSM (Protected Shared Memory), αποτελείται από ένα κομμάτι κοινής
      μνήμης και δύο σημαφόρους (semEmpty και semFull). Οι σημαφόροι
      χρησιμοποιούνται για έλεγχο προσπέλασης της κοινής μνήμης από τις
      διεργασίες.

    > Πιο συγκεκριμένα, o semEmpty αρχικοποιείτε σε 1 ενώ ο semFull
      αρχικοποιείται σε 0, πράγμα που υποδηλώνει ότι η αντίστοιχη κοινή μνήμη
      είναι κενή.

    > Η διεργασία παραγωγός για έχει δυνατότητα να γράψει στην κοινή μνήμη θα
      πρέπει πρώτα να κάνει 'down' τον semEmpty. Αφότου εισάγει το εξάρτημα
      στην κοινή μνήμη εκτέλει 'up' στον semFull.

    > H δομή TriplePSM είναι απλώς ένας πίνακας με τρία PSM. Έχει υλοποιηθεί
      για τη διευκόλυνση της μεταφοράς των εξαρτημάτων από το βαφείο στις
      διεργασίες ελέγχου.

Ουρά στη συναρμολόγηση
    > Η διεργασία συναρμολόγησης διαθέτει τρείς ουρές, μια για κάθε είδος
      εξαρτήματος. Όταν λαμβάνεται ένα εξάρτημα εισάγεται στην αντίστοιχη ουρά
      και όταν υπάρχει τουλάχιστον ένα εξάρτημα σε κάθε ουρά, τότε αφαίρείται
      ένα εξάρτημα από κάθε ουρά γίνεται συναρμολόγηση.
