Λειτουργικά Συστήματα 2018-19
Εργασία 1

Μαστοράκης Ευστάθιος-Ανδρέας
1115201500092


Γενική σχεδίαση
    > Η αρχική διεργασία δημιουργεί 8 νέες διεργασίες.
        - 3 διεργασίες που κατασκευάζουν εξαρτήματα
        - 1 διεργασία βαφείο
        - 3 διεργασίες που ελέγχουν τα εξαρτήματα
        - 1 διεργασία που συναρμολογεί τα εξαρτήματα

    > Οι τρείς διεργασίες που κατασκευάζουν τα εξαρτήματα μεταφέρουν το κάθε
      εξάρτημα τους στο βαφείο μέσω ενός κομματιού κοινής μνήμης το οποίο
      προστατεύεται από δύο σημαφόρους. Δηλαδή υπάρχει ένα κομμάτι κοινής
      μνήμης ανάμεσα στους κατασκευαστές και το βαφείο.

    > Ανάμεσα στο βαφείο και τους ελεγκτές, υπάρχει ένα μόνο κομμάτι κοινής
      μνήμης. Το βαφείο λαμβάνει δείκτη στην κοινή μνήμη, ένα σημαφόρο που
      δείχνει ότι ο η κοινή μνήμη είναι κενή (semEmpty) και τρείς σημαφόρους
      που δείχουν ότι η κοινή μνήμη περιέχει ένα εξάρτημα (semFull[3]).
      Ανάλογα με το είδος του εξαρτήματος που μόλις βαφτηκε θα γίνει 'up' ο
      αντιστοίχος semFull και έτσι θα εισαχθεί στην κοινή μνήμη μόνο η
      κατάλληλη διεργασία ελεγκτής. Κάθε διεργασία ελεγκτή έχει δείκτη στην
      κοινή μνήμη, τον κοινό σε όλους semEmpty και έναν μόνο semFull. Kάθε
      ελεγκτής περιμένει το δικό του semFull να γίνει '1' για να προσπελάσει
      την κοινή μνήμη.

    > Ανάμεσα στους ελεγκτές και τη διεργασία συναρμολόγησης υπάρχει ένα
      κομμάτι κοινής μνήμης, ίδιο και για τους τρείς ελεγκτές. Από εκεί
      λαμβάνει ο συναρμολογητής τα ελεχγμένα εξαρτήματα. Όπως και πριν,
      αυτήη κοινή μνήμη έχει δύο σημαφόρους που ελέγχουν την προσπέλαση
      της από τις διεργασίες.


Σχετικό Σχήμα:
+----------+                                              +---------+
|Κατ/κευη 1|------+                                +----->|Έλεγχος 1|------+
+----------+      |                                |      +---------+      |
                  v                                |                       v
+----------+   +-----------+   +------+   +-----------+   +---------+   +-----------+   +-------------+
|Κατ/κευη 2|-->|Κοινή Μνήμη|-->|Βαφείο|-->|Κοινή Μνήμη|-->|Έλεγχος 2|-->|Κοινή Μνήμη|-->|Συναρμολόγηση|
+----------+   +-----------+   +------+   +-----------+   +---------+   +-----------+   +-------------+
                  ^                                |                       ^
+----------+      |                                |      +---------+      |
|Κατ/κευη 3|------+                                +----->|Έλεγχος 3|------+
+----------+                                              +---------+


Δομή Part
    > Η δομή Part είναι το εξάρτημα. Περιέχει τα εξης πεδία:
        - type: τύπος του εξαρτήματος (0 ή 1 ή 2)
        - id: ο τετραψήφιο τυχαίος αναγνωριστικός αριθμός
        - creationTime: χρονική στιγμή δημιουργίας του εξαρτήματος
        - painterTime: χρονική στιγμή κατάληψης του βαφείου


Δομή PSM και TriplePSM
    > H δομή PSM (Protected Shared Memory), αποτελείται από ένα κομμάτι κοινής
      μνήμης και δύο σημαφόρους (semEmpty και semFull). H κοινή μνήμη έχει
      χώρο αρκετό για να φιλοξενίσει μόνο ένα εξάρτημα. Οι σημαφόροι
      χρησιμοποιούνται για έλεγχο προσπέλασης της κοινής μνήμης από τις
      διεργασίες.

    > Πιο συγκεκριμένα, o semEmpty αρχικοποιείτε σε 1 ενώ ο semFull
      αρχικοποιείται σε 0, πράγμα που υποδηλώνει ότι η αντίστοιχη κοινή μνήμη
      είναι κενή.

    > Η διεργασία παραγωγός για έχει δυνατότητα να γράψει στην κοινή μνήμη θα
      πρέπει πρώτα να κάνει 'down' τον semEmpty. Αφότου εισάγει το εξάρτημα
      στην κοινή μνήμη εκτέλει 'up' στον semFull.

    > H δομή TriplePSM περιέχει ένα κομμάτι κοινής μνήμης, ένα σημαφόρο semEmpty και τρεις σημαφόρους semFull.
      Χρησιμοποιείται από το βαφείο όπως περιγράφεται παραπάνω.

Ουρά στη συναρμολόγηση
    > Η διεργασία συναρμολόγησης διαθέτει τρείς ουρές, μια για κάθε είδος
      εξαρτήματος. Όταν λαμβάνεται ένα εξάρτημα εισάγεται στην αντίστοιχη ουρά
      και όταν υπάρχει τουλάχιστον ένα εξάρτημα σε κάθε ουρά, τότε αφαίρείται
      ένα εξάρτημα από κάθε ουρά γίνεται συναρμολόγηση.
